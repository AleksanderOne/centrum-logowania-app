<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo Blog - Zintegrowane</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: 'class' };
    </script>
    <!-- WspÃ³lna konfiguracja demo -->
    <script src="../demo-config.js"></script>
    <!-- SDK Centrum Logowania -->
    <script src="../../sdk/auth.js"></script>
  </head>

  <body
    class="bg-slate-100 dark:bg-slate-900 flex flex-col items-center justify-center min-h-screen transition-colors duration-300 font-serif"
  >
    <!-- Theme Toggle -->
    <div class="absolute top-4 right-4">
      <button
        id="theme-toggle"
        class="p-2 rounded-full bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-orange-300 hover:ring-2 ring-orange-400 transition"
      >
        <span class="dark:hidden">â˜€ï¸</span><span class="hidden dark:inline">ğŸŒ™</span>
      </button>
    </div>

    <!-- "Owrapowany" Komponent GÅ‚Ã³wny -->
    <div
      id="blog-app"
      class="bg-white dark:bg-slate-800 p-8 rounded-lg shadow-2xl w-full max-w-lg border border-slate-200 dark:border-slate-700 hidden"
    >
      <h1
        class="text-3xl font-bold text-orange-600 dark:text-orange-400 mb-6 flex justify-between items-center"
      >
        Blog Premium <span>âœï¸</span>
      </h1>

      <p class="text-slate-600 dark:text-slate-300 mb-6">
        DziÄ™kujemy za subskrypcjÄ™. Oto TwÃ³j ekskluzywny content.
      </p>

      <div class="bg-slate-50 dark:bg-slate-900/50 p-4 rounded mb-6 border-l-4 border-orange-500">
        <h3 class="font-bold text-slate-800 dark:text-slate-100 mb-2">Jak wdraÅ¼aÄ‡ SSO?</h3>
        <p class="text-slate-600 dark:text-slate-400 text-sm">
          UÅ¼yj `CentrumLogowania.protect()` i gotowe!
        </p>
      </div>

      <div
        class="flex justify-between items-center border-t border-slate-200 dark:border-slate-700 pt-4"
      >
        <span id="user-email" class="text-sm text-slate-500 dark:text-slate-400 italic"></span>
        <button
          data-auth-logout
          class="text-xs uppercase font-bold text-slate-400 hover:text-orange-500 transition"
        >
          Wyloguj
        </button>
      </div>
    </div>

    <!-- Inicjalizacja z uÅ¼yciem wspÃ³lnej konfiguracji -->
    <script>
      CentrumLogowania.protect({
        clientId: window.DEMO_CONFIG.clientId,
        authUrl: window.DEMO_CONFIG.authUrl, // undefined = auto-wykrywany
        appId: 'blog-app',
        onLogin: (user) => {
          document.getElementById('user-email').innerText = user.email;
        },
      });

      // Dark mode
      const btn = document.getElementById('theme-toggle');
      const html = document.documentElement;
      if (localStorage.theme === 'dark' || !('theme' in localStorage)) html.classList.add('dark');
      btn.onclick = () => {
        html.classList.toggle('dark');
        localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
      };
    </script>
  </body>
</html>
