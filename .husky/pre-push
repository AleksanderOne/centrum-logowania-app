#!/bin/sh
# Pre-push hook: uruchamia testy z coverage, e2e i build przed wypchniÄ™ciem na remote

echo "ğŸ“Š Sprawdzam pokrycie kodu testami (wymagane 100%)..."
npm run test:coverage

if [ $? -ne 0 ]; then
  echo "âŒ Coverage poniÅ¼ej 100%! Push zablokowany."
  echo "ğŸ“‹ Wymagane: 100% statements, branches, functions, lines"
  echo "ğŸ’¡ Uruchom 'npm run test:coverage' aby zobaczyÄ‡ szczegÃ³Å‚y."
  exit 1
fi

echo "ğŸ”¨ Sprawdzam czy projekt siÄ™ buduje..."
npm run build

echo "ğŸ­ Uruchamiam testy e2e..."
npm run test:e2e

echo "âœ… Pre-push checks zakoÅ„czone pomyÅ›lnie! Wypychanie dozwolone."
